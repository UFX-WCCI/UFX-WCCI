@model IEnumerable<UFX_WCCI.Models.ApplicationUser>


<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Posts Map</title>
</head>
<body>
    <div>
        <div id="map_canvas" class="col-md-6" style="width:425px; height:550px;"></div>
        <div id="userpostings" class="col-md-6" style="padding-top:300px;">
        </div>

        <script type="text/javascript" src="https://maps.google.com/maps/api/js?key=AIzaSyBsT1NB4_Y4FwHcrXCKqRXell4s6rInvUg"></script>
        <script type="text/javascript">


            var map;
            var markers = [];


            initialize();

            function initialize() {
                var myOptions = {
                    zoom: 10,
                    center: new google.maps.LatLng(@ViewBag.CurrentUser.Latitude,@ViewBag.CurrentUser.Longitude),
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    clickableIcons:true
                }
                map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

                @foreach (var user in Model)
                {
                @:addMarker(new google.maps.LatLng(@user.Latitude, @user.Longitude), "@user.UserName");
                                }
                
            }

            function addMarker(latlng, myTitle) {
                markers.push(new google.maps.Marker({
                    position: latlng,
                    map: map,
                    title: myTitle,
                    icon: "https://maps.google.com/mapfiles/marker" + String.fromCharCode(markers.length + 65) + ".png"
                }));


            }

        </script>

    </div>
</body>
</html>
